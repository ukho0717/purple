let User,Matching;_680‍.x([["chatUser",()=>chatUser]]);_680‍.w("../../models/user",[["default",["User"],function(v){User=v}]]);_680‍.w("../../models/matching",[["default",["Matching"],function(v){Matching=v}]]);


       const chatUser = async ctx=>{
        _680‍.g.console.log('접속유저: ',ctx.state.user)
        const login_id = ctx.state.user._id//로그인한아이디

        let my_id = (await Matching.findOne({'user':login_id}).populate('matched')).matched
        if(!my_id){ my_id=[]}
        let arr = my_id.map(user=>user._id.toJSON())

    try{
        ctx.body = await User.find({match: { $in: arr }})
    }catch(e){
        ctx.throw(500,e);
    }
}
